### <beg-file_info>
### main:
###   - date: created="Mon Nov 30 21:42:43 2015"
###     last: lastmod="Mon Nov 30 21:42:43 2015"
###     tags: ko09, komodo, javascript, api, functions
###     author: created="dreftymac"
###     dreftymacid:    "bread_chain_algerian"
###     seealso: |
###         *
###     desc: |
###         ko09 javascript helper functions
### <end-file_info>

k09HelperFunctions:

  - date: created="Mon Nov 30 21:44:06 2015"
    last: lastmod="Mon Nov 30 21:44:06 2015"
    funcname:    "App_getPlatform"
    funcgroup:    koApp
    funcdesc: |
          return the system platform this app is running under
    funcparams: 
          - [ __blank__, (__blank__), __blank__, ]
    funcreturns: 
         - string ;; system platform
    funcdetails: | 
         funcdetails
    dreftymacid: risky_icicle_bus
    tags: application, system, os, platform
    seealso: |
        *
    wwbody: |
        // init
        var vout  =   '';
        //;;
        
        // main
        vout      =   Components.
          classes["@mozilla.org/xre/app-info;1"].
          getService(Components.interfaces.nsIXULRuntime).
          OS.
          toString()
          ;
        //;;
        
        // return
        return(vout);
        //;;
        
  - date: created="Mon Nov 30 21:44:06 2015"
    last: lastmod="Mon Nov 30 21:44:06 2015"
    funcname:    "App_getKoDirsDirectory"
    funcgroup:    koApp
    funcdesc: |
          Return a koDirs directory path based on the supplied keyname.
    funcparams: 
          - keyname  ;; (string) ;; the built-in keyname of the desired koDirs directory path
    funcreturns: 
         - string ;; directory path
    funcdetails: | 
            * keyname is expected to be one of the following built-in values:
            *    binDBGPDir
            *    binDir
            *    commonDataDir
            *    docDir
            *    factoryCommonDataDir
            *    hostUserDataDir
            *    installDir
            *    mozBinDir
            *    perlDBGPDir
            *    pythonDBGPDir
            *    pythonExe
            *    roamingUserDataDir
            *    sdkDir
            *    supportDir
            *    userCacheDir
            *    userDataDir
    dreftymacid: chance_vividly_hostage
    tags: application, get
    seealso: |
        *
    wwbody: |
      var vout  =   '';
      try{
        vout      =   Components.
          classes['@activestate.com/koDirs;1'].
          getService(Components.interfaces.koIDirs)[keyname];
      }catch(exx){}
      return(vout);
            
  - date: created="Mon Nov 30 21:44:06 2015"
    last: lastmod="Mon Nov 30 21:44:06 2015"
    funcname:    "App_writeKoLogs"
    funcgroup:    koApp
    funcdesc: |
          write a string message to the komodo log
    funcparams: 
          - [ message, (string), string message to write to the komodo log, ]
    funcreturns: 
         -  [ __blank__, ]
    funcdetails: | 
        funcdetails
    dreftymacid: unseat_weakens_disunite
    tags: application, write
    seealso: |
        *
    wwbody: |
      this.appLogWrite = function(message){
      //TODO: NO_WORKY fix this, it does not seem to work correctly
      var consoleService = Components.
            classes['@mozilla.org/consoleservice;1'].
            getService(Components.interfaces.nsIConsoleService);
      consoleService.logStringMessage(message);
      
  - date: created="Mon Nov 30 21:44:06 2015"
    last: lastmod="Mon Nov 30 21:44:06 2015"
    funcname:    "App_writeKoStatus"
    funcgroup:    koApp
    funcdesc: |
          write a string message to the status bar
    funcparams: 
          - [ message, (string), string message to write to the komodo status bar, ]
    funcreturns: 
          - [ __blank__, (__blank__), __blank__, ]
    funcdetails: | 
        funcdetails
    dreftymacid: retreat_brews_wrecker
    tags: application, write
    seealso: |
        *
    wwbody: |
      StatusBar_AddMessage(message, "debugger", 5000, true);     
          
  - date: created="Mon Nov 30 21:44:06 2015"
    last: lastmod="Mon Nov 30 21:44:06 2015"
    funcname:    "App_lsgetCurrentBufferPaths"
    funcgroup:    koApp
    funcdesc: |
          return js array of paths of all open CurrentBuffers
    funcparams: 
          - [ __blank__, (__blank__), __blank__, ]
    funcreturns: 
         - string ;; directory path
    funcdetails: | 
        funcdetails
    dreftymacid: chance_vividly_hostage
    tags: application, get
    seealso: |
        *
    wwbody: |
        // init
        var filePaths = [];
        var editorViews = ko.views.manager.getAllViews();
        //;;
        
        // process
        for (let editorView of editorViews)
        {
          filePaths.push(editorView.koDoc.file.path);
        }
        //;;
        
        // return
        vout  = filePaths;        
        return vout;
        //;;
        
        